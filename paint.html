<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">	
	<title>Примитивная рисовалка на Canvas</title>
	<style>
	.canvas{
		background-color: yellow;
		float: left;
	}
	.btn{
		float: left;
		margin-left: 10px;
		border-style: none;
		background-color: blue;
		color: #fff;
		width: 100px;
		height: 40px;
		font-size: 18px;
	}
	.btn:hover {
		box-shadow: 0 0 5px 0 blue;
	}
	.btn:active{
		opacity: 0.7;
	}
	</style>	
</head>
<body>
	<div id="paint"></div>
<script>
	function Paint(options){
		var block = options.elem;
		//создаем блок  Canvas
		var element = document.createElement('canvas');
		element.width=700;
		element.height=700;
		element.className='canvas';
		element.id='paint';
		block.appendChild(element);
		//добавим кнопку "Очистить"
		var btn = document.createElement('button');
		btn.className='btn';
		btn.textContent='Очистить';
		block.appendChild(btn);
		var cx = element.getContext('2d');
		
		
		//рисуем
		
		//обработчик кнопки
		btn.addEventListener('click', function(evant){
			cx.clearRect(0,0, element.width, element.height);
			   var w = element.width;
                element.width = 0;
                element.width = w;
		});
		
		//обработчик движения мыши
		element.addEventListener('mousemove', function(evant){
			var x,y;
			x=evant.pageX;
			y=evant.pageY;
			setTimeout(function(){
				cx.fillStyle="red";
				cx.strokeStyle="red";
				cx.lineWidth=2;
				cx.lineTo(x-element.offsetLeft, y-element.offsetTop);
				cx.moveTo(x-element.offsetLeft, y-element.offsetTop);
				cx.stroke();
			},1)
		});	
	}
	var p=new Paint({
		elem: document.getElementById('paint')
	});	
</script>
</body>
</html>
